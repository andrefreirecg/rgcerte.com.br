{"version":3,"names":["_classnames","_interopRequireDefault","require","_components","_i18n","_element","_icons","_utils","_object","useHasEffectsPanel","settings","hasShadowControl","useHasShadowControl","shadow","EffectsToolsPanel","resetAllFilter","onChange","value","panelId","children","resetAll","updatedValue","_react","createElement","__experimentalToolsPanel","label","__","DEFAULT_CONTROLS","EffectsPanel","as","Wrapper","inheritedValue","defaultControls","decodeValue","rawValue","getValueFromVariable","hasShadowEnabled","setShadow","newValue","setImmutably","hasShadow","resetShadow","undefined","useCallback","previousValue","__experimentalToolsPanelItem","hasValue","onDeselect","isShownByDefault","__experimentalItemGroup","isBordered","isSeparated","ShadowPopover","onShadowChange","popoverProps","placement","offset","shift","Dropdown","className","renderToggle","renderShadowToggle","renderContent","__experimentalDropdownContentWrapper","paddingSize","ShadowPopoverContainer","onToggle","isOpen","toggleProps","onClick","classnames","Button","__experimentalHStack","justify","Icon","icon","shadowIcon","size","FlexItem","defaultShadows","presets","default","themeShadows","theme","defaultPresetsEnabled","defaultPresets","shadows","__experimentalVStack","spacing","__experimentalHeading","level","ShadowPresets","activeShadow","onSelect","__experimentalGrid","columns","gap","align","map","name","slug","ShadowIndicator","key","isActive","style","boxShadow","showTooltip","check"],"sources":["@wordpress/block-editor/src/components/global-styles/effects-panel.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\t__experimentalGrid as Grid,\n\t__experimentalHeading as Heading,\n\tFlexItem,\n\tDropdown,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\tButton,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\nimport { shadow as shadowIcon, Icon, check } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { getValueFromVariable } from './utils';\nimport { setImmutably } from '../../utils/object';\n\nexport function useHasEffectsPanel( settings ) {\n\tconst hasShadowControl = useHasShadowControl( settings );\n\treturn hasShadowControl;\n}\n\nfunction useHasShadowControl( settings ) {\n\treturn !! settings?.shadow;\n}\n\nfunction EffectsToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Effects' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tshadow: true,\n};\n\nexport default function EffectsPanel( {\n\tas: Wrapper = EffectsToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n} ) {\n\tconst decodeValue = ( rawValue ) =>\n\t\tgetValueFromVariable( { settings }, '', rawValue );\n\n\t// Shadow\n\tconst hasShadowEnabled = useHasShadowControl( settings );\n\tconst shadow = decodeValue( inheritedValue?.shadow );\n\tconst setShadow = ( newValue ) => {\n\t\tonChange( setImmutably( value, [ 'shadow' ], newValue ) );\n\t};\n\tconst hasShadow = () => !! value?.shadow;\n\tconst resetShadow = () => setShadow( undefined );\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tshadow: undefined,\n\t\t};\n\t}, [] );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ hasShadowEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Shadow' ) }\n\t\t\t\t\thasValue={ hasShadow }\n\t\t\t\t\tonDeselect={ resetShadow }\n\t\t\t\t\tisShownByDefault={ defaultControls.shadow }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<ItemGroup isBordered isSeparated>\n\t\t\t\t\t\t<ShadowPopover\n\t\t\t\t\t\t\tshadow={ shadow }\n\t\t\t\t\t\t\tonShadowChange={ setShadow }\n\t\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ItemGroup>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n\nconst ShadowPopover = ( { shadow, onShadowChange, settings } ) => {\n\tconst popoverProps = {\n\t\tplacement: 'left-start',\n\t\toffset: 36,\n\t\tshift: true,\n\t};\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ popoverProps }\n\t\t\tclassName=\"block-editor-global-styles-effects-panel__shadow-dropdown\"\n\t\t\trenderToggle={ renderShadowToggle() }\n\t\t\trenderContent={ () => (\n\t\t\t\t<DropdownContentWrapper paddingSize=\"medium\">\n\t\t\t\t\t<ShadowPopoverContainer\n\t\t\t\t\t\tshadow={ shadow }\n\t\t\t\t\t\tonShadowChange={ onShadowChange }\n\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t/>\n\t\t\t\t</DropdownContentWrapper>\n\t\t\t) }\n\t\t/>\n\t);\n};\n\nfunction renderShadowToggle() {\n\treturn ( { onToggle, isOpen } ) => {\n\t\tconst toggleProps = {\n\t\t\tonClick: onToggle,\n\t\t\tclassName: classnames( { 'is-open': isOpen } ),\n\t\t\t'aria-expanded': isOpen,\n\t\t};\n\n\t\treturn (\n\t\t\t<Button { ...toggleProps }>\n\t\t\t\t<HStack justify=\"flex-start\">\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tclassName=\"block-editor-global-styles-effects-panel__toggle-icon\"\n\t\t\t\t\t\ticon={ shadowIcon }\n\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t/>\n\t\t\t\t\t<FlexItem>{ __( 'Shadow' ) }</FlexItem>\n\t\t\t\t</HStack>\n\t\t\t</Button>\n\t\t);\n\t};\n}\n\nfunction ShadowPopoverContainer( { shadow, onShadowChange, settings } ) {\n\tconst defaultShadows = settings?.shadow?.presets?.default;\n\tconst themeShadows = settings?.shadow?.presets?.theme;\n\tconst defaultPresetsEnabled = settings?.shadow?.defaultPresets;\n\n\tconst shadows = [\n\t\t...( defaultPresetsEnabled ? defaultShadows : [] ),\n\t\t...( themeShadows || [] ),\n\t];\n\n\treturn (\n\t\t<div className=\"block-editor-global-styles-effects-panel__shadow-popover-container\">\n\t\t\t<VStack spacing={ 4 }>\n\t\t\t\t<Heading level={ 5 }>{ __( 'Shadow' ) }</Heading>\n\t\t\t\t<ShadowPresets\n\t\t\t\t\tpresets={ shadows }\n\t\t\t\t\tactiveShadow={ shadow }\n\t\t\t\t\tonSelect={ onShadowChange }\n\t\t\t\t/>\n\t\t\t</VStack>\n\t\t</div>\n\t);\n}\n\nfunction ShadowPresets( { presets, activeShadow, onSelect } ) {\n\treturn ! presets ? null : (\n\t\t<Grid columns={ 6 } gap={ 0 } align=\"center\" justify=\"center\">\n\t\t\t{ presets.map( ( { name, slug, shadow } ) => (\n\t\t\t\t<ShadowIndicator\n\t\t\t\t\tkey={ slug }\n\t\t\t\t\tlabel={ name }\n\t\t\t\t\tisActive={ shadow === activeShadow }\n\t\t\t\t\tonSelect={ () =>\n\t\t\t\t\t\tonSelect( shadow === activeShadow ? undefined : shadow )\n\t\t\t\t\t}\n\t\t\t\t\tshadow={ shadow }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</Grid>\n\t);\n}\n\nfunction ShadowIndicator( { label, isActive, onSelect, shadow } ) {\n\treturn (\n\t\t<div className=\"block-editor-global-styles-effects-panel__shadow-indicator-wrapper\">\n\t\t\t<Button\n\t\t\t\tclassName=\"block-editor-global-styles-effects-panel__shadow-indicator\"\n\t\t\t\tonClick={ onSelect }\n\t\t\t\tlabel={ label }\n\t\t\t\tstyle={ { boxShadow: shadow } }\n\t\t\t\tshowTooltip\n\t\t\t>\n\t\t\t\t{ isActive && <Icon icon={ check } /> }\n\t\t\t</Button>\n\t\t</div>\n\t);\n}\n"],"mappings":"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"}