{"version":3,"names":["_classnames","_interopRequireDefault","require","_data","_element","_compose","_blocks","_components","_blockMover","_blockParentSelector","_blockSwitcher","_blockControls","_blockToolbarLastItem","_blockSettingsMenu","_blockLock","_convertToGroupButtons","_blockEditVisuallyButton","_utils","_store","_blockNameContext","BlockToolbar","hideDragHandle","blockClientIds","blockType","isValid","isVisual","blockEditingMode","useSelect","select","getBlockName","getBlockMode","getSelectedBlockClientIds","isBlockValid","getBlockRootClientId","getBlockEditingMode","blockEditorStore","selectedBlockClientIds","selectedBlockClientId","blockRootClientId","getBlockType","rootClientId","every","id","toolbarWrapperRef","useRef","nodeRef","showHoveredOrFocusedGestures","useShowHoveredOrFocusedGestures","ref","isLargeViewport","useViewportMatch","hasBlockSupport","length","shouldShowVisualToolbar","isMultiToolbar","isSynced","isReusableBlock","isTemplatePart","classes","classnames","_react","createElement","className","default","ToolbarGroup","clientIds","BlockLockToolbar","clientId","wrapperRef","BlockGroupToolbar","Fragment","Slot","group","Provider","value","name","_default","exports"],"sources":["@wordpress/block-editor/src/components/block-toolbar/index.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useRef } from '@wordpress/element';\nimport { useViewportMatch } from '@wordpress/compose';\nimport {\n\tgetBlockType,\n\thasBlockSupport,\n\tisReusableBlock,\n\tisTemplatePart,\n} from '@wordpress/blocks';\nimport { ToolbarGroup } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockMover from '../block-mover';\nimport BlockParentSelector from '../block-parent-selector';\nimport BlockSwitcher from '../block-switcher';\nimport BlockControls from '../block-controls';\nimport __unstableBlockToolbarLastItem from './block-toolbar-last-item';\nimport BlockSettingsMenu from '../block-settings-menu';\nimport { BlockLockToolbar } from '../block-lock';\nimport { BlockGroupToolbar } from '../convert-to-group-buttons';\nimport BlockEditVisuallyButton from '../block-edit-visually-button';\nimport { useShowHoveredOrFocusedGestures } from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport __unstableBlockNameContext from './block-name-context';\n\nconst BlockToolbar = ( { hideDragHandle } ) => {\n\tconst { blockClientIds, blockType, isValid, isVisual, blockEditingMode } =\n\t\tuseSelect( ( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockMode,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\tisBlockValid,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\t\tconst selectedBlockClientId = selectedBlockClientIds[ 0 ];\n\t\t\tconst blockRootClientId = getBlockRootClientId(\n\t\t\t\tselectedBlockClientId\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tblockClientIds: selectedBlockClientIds,\n\t\t\t\tblockType:\n\t\t\t\t\tselectedBlockClientId &&\n\t\t\t\t\tgetBlockType( getBlockName( selectedBlockClientId ) ),\n\t\t\t\trootClientId: blockRootClientId,\n\t\t\t\tisValid: selectedBlockClientIds.every( ( id ) =>\n\t\t\t\t\tisBlockValid( id )\n\t\t\t\t),\n\t\t\t\tisVisual: selectedBlockClientIds.every(\n\t\t\t\t\t( id ) => getBlockMode( id ) === 'visual'\n\t\t\t\t),\n\t\t\t\tblockEditingMode: getBlockEditingMode( selectedBlockClientId ),\n\t\t\t};\n\t\t}, [] );\n\n\tconst toolbarWrapperRef = useRef( null );\n\n\t// Handles highlighting the current block outline on hover or focus of the\n\t// block type toolbar area.\n\tconst nodeRef = useRef();\n\tconst showHoveredOrFocusedGestures = useShowHoveredOrFocusedGestures( {\n\t\tref: nodeRef,\n\t} );\n\n\tconst isLargeViewport = ! useViewportMatch( 'medium', '<' );\n\n\tif ( blockType ) {\n\t\tif ( ! hasBlockSupport( blockType, '__experimentalToolbar', true ) ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tif ( blockClientIds.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst shouldShowVisualToolbar = isValid && isVisual;\n\tconst isMultiToolbar = blockClientIds.length > 1;\n\tconst isSynced =\n\t\tisReusableBlock( blockType ) || isTemplatePart( blockType );\n\n\tconst classes = classnames( 'block-editor-block-toolbar', {\n\t\t'is-synced': isSynced,\n\t} );\n\n\treturn (\n\t\t<div className={ classes } ref={ toolbarWrapperRef }>\n\t\t\t{ ! isMultiToolbar &&\n\t\t\t\tisLargeViewport &&\n\t\t\t\tblockEditingMode === 'default' && <BlockParentSelector /> }\n\t\t\t{ ( shouldShowVisualToolbar || isMultiToolbar ) &&\n\t\t\t\tblockEditingMode === 'default' && (\n\t\t\t\t\t<div ref={ nodeRef } { ...showHoveredOrFocusedGestures }>\n\t\t\t\t\t\t<ToolbarGroup className=\"block-editor-block-toolbar__block-controls\">\n\t\t\t\t\t\t\t<BlockSwitcher clientIds={ blockClientIds } />\n\t\t\t\t\t\t\t{ ! isMultiToolbar && (\n\t\t\t\t\t\t\t\t<BlockLockToolbar\n\t\t\t\t\t\t\t\t\tclientId={ blockClientIds[ 0 ] }\n\t\t\t\t\t\t\t\t\twrapperRef={ toolbarWrapperRef }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<BlockMover\n\t\t\t\t\t\t\t\tclientIds={ blockClientIds }\n\t\t\t\t\t\t\t\thideDragHandle={ hideDragHandle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t{ shouldShowVisualToolbar && isMultiToolbar && (\n\t\t\t\t<BlockGroupToolbar />\n\t\t\t) }\n\t\t\t{ shouldShowVisualToolbar && (\n\t\t\t\t<>\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tgroup=\"parent\"\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tgroup=\"block\"\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockControls.Slot className=\"block-editor-block-toolbar__slot\" />\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tgroup=\"inline\"\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tgroup=\"other\"\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<__unstableBlockNameContext.Provider\n\t\t\t\t\t\tvalue={ blockType?.name }\n\t\t\t\t\t>\n\t\t\t\t\t\t<__unstableBlockToolbarLastItem.Slot />\n\t\t\t\t\t</__unstableBlockNameContext.Provider>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t<BlockEditVisuallyButton clientIds={ blockClientIds } />\n\t\t\t{ blockEditingMode === 'default' && (\n\t\t\t\t<BlockSettingsMenu clientIds={ blockClientIds } />\n\t\t\t) }\n\t\t</div>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-toolbar/README.md\n */\nexport default BlockToolbar;\n"],"mappings":"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"}