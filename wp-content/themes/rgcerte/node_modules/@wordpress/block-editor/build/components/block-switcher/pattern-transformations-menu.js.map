{"version":3,"names":["_i18n","require","_element","_compose","_icons","_components","_blockPreview","_interopRequireDefault","_useTransformedPatterns","PatternTransformationsMenu","blocks","patterns","statePatterns","onSelect","showTransforms","setShowTransforms","useState","useTransformedPatterns","length","_react","createElement","MenuGroup","className","PreviewPatternsPopover","MenuItem","onClick","event","preventDefault","icon","chevronRight","__","Popover","position","BlockPatternsList","composite","useCompositeState","__unstableComposite","role","map","pattern","BlockPattern","key","name","baseClassName","descriptionId","useInstanceId","__unstableCompositeItem","as","title","description","undefined","transformedBlocks","default","viewportWidth","VisuallyHidden","id","_default","exports"],"sources":["@wordpress/block-editor/src/components/block-switcher/pattern-transformations-menu.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { useInstanceId } from '@wordpress/compose';\nimport { chevronRight } from '@wordpress/icons';\n\nimport {\n\tMenuGroup,\n\tMenuItem,\n\tPopover,\n\tVisuallyHidden,\n\t__unstableComposite as Composite,\n\t__unstableUseCompositeState as useCompositeState,\n\t__unstableCompositeItem as CompositeItem,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockPreview from '../block-preview';\nimport useTransformedPatterns from './use-transformed-patterns';\n\nfunction PatternTransformationsMenu( {\n\tblocks,\n\tpatterns: statePatterns,\n\tonSelect,\n} ) {\n\tconst [ showTransforms, setShowTransforms ] = useState( false );\n\tconst patterns = useTransformedPatterns( statePatterns, blocks );\n\tif ( ! patterns.length ) return null;\n\n\treturn (\n\t\t<MenuGroup className=\"block-editor-block-switcher__pattern__transforms__menugroup\">\n\t\t\t{ showTransforms && (\n\t\t\t\t<PreviewPatternsPopover\n\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<MenuItem\n\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tsetShowTransforms( ! showTransforms );\n\t\t\t\t} }\n\t\t\t\ticon={ chevronRight }\n\t\t\t>\n\t\t\t\t{ __( 'Patterns' ) }\n\t\t\t</MenuItem>\n\t\t</MenuGroup>\n\t);\n}\n\nfunction PreviewPatternsPopover( { patterns, onSelect } ) {\n\treturn (\n\t\t<div className=\"block-editor-block-switcher__popover__preview__parent\">\n\t\t\t<div className=\"block-editor-block-switcher__popover__preview__container\">\n\t\t\t\t<Popover\n\t\t\t\t\tclassName=\"block-editor-block-switcher__preview__popover\"\n\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"block-editor-block-switcher__preview\">\n\t\t\t\t\t\t<div className=\"block-editor-block-switcher__preview-title\">\n\t\t\t\t\t\t\t{ __( 'Preview' ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Popover>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction BlockPatternsList( { patterns, onSelect } ) {\n\tconst composite = useCompositeState();\n\treturn (\n\t\t<Composite\n\t\t\t{ ...composite }\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-block-switcher__preview-patterns-container\"\n\t\t\taria-label={ __( 'Patterns list' ) }\n\t\t>\n\t\t\t{ patterns.map( ( pattern ) => (\n\t\t\t\t<BlockPattern\n\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\tcomposite={ composite }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</Composite>\n\t);\n}\n\nfunction BlockPattern( { pattern, onSelect, composite } ) {\n\t// TODO check pattern/preview width...\n\tconst baseClassName =\n\t\t'block-editor-block-switcher__preview-patterns-container';\n\tconst descriptionId = useInstanceId(\n\t\tBlockPattern,\n\t\t`${ baseClassName }-list__item-description`\n\t);\n\treturn (\n\t\t<div className={ `${ baseClassName }-list__list-item` }>\n\t\t\t<CompositeItem\n\t\t\t\trole=\"option\"\n\t\t\t\tas=\"div\"\n\t\t\t\t{ ...composite }\n\t\t\t\taria-label={ pattern.title }\n\t\t\t\taria-describedby={\n\t\t\t\t\tpattern.description ? descriptionId : undefined\n\t\t\t\t}\n\t\t\t\tclassName={ `${ baseClassName }-list__item` }\n\t\t\t\tonClick={ () => onSelect( pattern.transformedBlocks ) }\n\t\t\t>\n\t\t\t\t<BlockPreview\n\t\t\t\t\tblocks={ pattern.transformedBlocks }\n\t\t\t\t\tviewportWidth={ pattern.viewportWidth || 500 }\n\t\t\t\t/>\n\t\t\t\t<div className={ `${ baseClassName }-list__item-title` }>\n\t\t\t\t\t{ pattern.title }\n\t\t\t\t</div>\n\t\t\t</CompositeItem>\n\t\t\t{ !! pattern.description && (\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ pattern.description }\n\t\t\t\t</VisuallyHidden>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default PatternTransformationsMenu;\n"],"mappings":"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"}