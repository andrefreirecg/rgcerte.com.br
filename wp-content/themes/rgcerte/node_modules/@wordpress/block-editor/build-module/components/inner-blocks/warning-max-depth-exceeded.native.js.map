{"version":3,"names":["TouchableWithoutFeedback","View","__","sprintf","useState","useDispatch","useSelect","Warning","UnsupportedBlockDetails","store","blockEditorStore","MAX_NESTING_DEPTH","useUnsupportedBlockEditor","WarningMaxDepthExceeded","clientId","showDetails","setShowDetails","isSelected","innerBlocks","select","getBlock","isBlockSelected","replaceBlocks","isUnsupportedBlockEditorSupported","canEnableUnsupportedBlockEditor","onUngroup","length","description","descriptionFormat","createElement","disabled","accessibilityLabel","accessibilityRole","accessibilityHint","onPress","message","showSheet","onCloseSheet","title","customActions","label"],"sources":["@wordpress/block-editor/src/components/inner-blocks/warning-max-depth-exceeded.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { TouchableWithoutFeedback, View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport Warning from '../warning';\nimport UnsupportedBlockDetails from '../unsupported-block-details';\nimport { store as blockEditorStore } from '../../store';\nimport { MAX_NESTING_DEPTH } from './constants';\nimport useUnsupportedBlockEditor from '../use-unsupported-block-editor';\n\nconst WarningMaxDepthExceeded = ( { clientId } ) => {\n\tconst [ showDetails, setShowDetails ] = useState( false );\n\n\tconst { isSelected, innerBlocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlock, isBlockSelected } = select( blockEditorStore );\n\t\t\treturn {\n\t\t\t\tinnerBlocks: getBlock( clientId )?.innerBlocks || [],\n\t\t\t\tisSelected: isBlockSelected( clientId ),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\n\n\tconst {\n\t\tisUnsupportedBlockEditorSupported,\n\t\tcanEnableUnsupportedBlockEditor,\n\t} = useUnsupportedBlockEditor( clientId );\n\n\tconst onUngroup = () => {\n\t\tif ( ! innerBlocks.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\treplaceBlocks( clientId, innerBlocks );\n\t};\n\n\tlet description;\n\t// When UBE can't be used, the description mentions using the web browser to edit the block.\n\tif (\n\t\t! isUnsupportedBlockEditorSupported &&\n\t\t! canEnableUnsupportedBlockEditor\n\t) {\n\t\t/* translators: Warning related to having blocks deeply nested. %d: The deepest nesting level. */\n\t\tconst descriptionFormat = __(\n\t\t\t'Blocks nested deeper than %d levels may not render properly in the mobile editor. For this reason, we recommend flattening the content by ungrouping the block or editing the block using your web browser.'\n\t\t);\n\t\tdescription = sprintf( descriptionFormat, MAX_NESTING_DEPTH );\n\t}\n\t// Otherwise, the description mentions using the web editor (i.e. UBE).\n\telse {\n\t\t/* translators: Warning related to having blocks deeply nested. %d: The deepest nesting level. */\n\t\tconst descriptionFormat = __(\n\t\t\t'Blocks nested deeper than %d levels may not render properly in the mobile editor. For this reason, we recommend flattening the content by ungrouping the block or editing the block using the web editor.'\n\t\t);\n\t\tdescription = sprintf( descriptionFormat, MAX_NESTING_DEPTH );\n\t}\n\n\treturn (\n\t\t<TouchableWithoutFeedback\n\t\t\tdisabled={ ! isSelected }\n\t\t\taccessibilityLabel={ __( 'Warning message' ) }\n\t\t\taccessibilityRole={ 'button' }\n\t\t\taccessibilityHint={ __( 'Tap here to show more details.' ) }\n\t\t\tonPress={ () => setShowDetails( true ) }\n\t\t>\n\t\t\t<View>\n\t\t\t\t<Warning\n\t\t\t\t\tmessage={ __(\n\t\t\t\t\t\t'Block cannot be rendered because it is deeply nested. Tap here for more details.'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t\t<UnsupportedBlockDetails\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tshowSheet={ showDetails }\n\t\t\t\t\tonCloseSheet={ () => setShowDetails( false ) }\n\t\t\t\t\ttitle={ __( 'Deeply nested block' ) }\n\t\t\t\t\tdescription={ description }\n\t\t\t\t\tcustomActions={ [\n\t\t\t\t\t\t{ label: __( 'Ungroup block' ), onPress: onUngroup },\n\t\t\t\t\t] }\n\t\t\t\t/>\n\t\t\t</View>\n\t\t</TouchableWithoutFeedback>\n\t);\n};\n\nexport default WarningMaxDepthExceeded;\n"],"mappings":";AAAA;AACA;AACA;AACA,SAASA,wBAAwB,EAAEC,IAAI,QAAQ,cAAc;;AAE7D;AACA;AACA;AACA,SAASC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAC7C,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,WAAW,EAAEC,SAAS,QAAQ,iBAAiB;;AAExD;AACA;AACA;AACA,OAAOC,OAAO,MAAM,YAAY;AAChC,OAAOC,uBAAuB,MAAM,8BAA8B;AAClE,SAASC,KAAK,IAAIC,gBAAgB,QAAQ,aAAa;AACvD,SAASC,iBAAiB,QAAQ,aAAa;AAC/C,OAAOC,yBAAyB,MAAM,iCAAiC;AAEvE,MAAMC,uBAAuB,GAAGA,CAAE;EAAEC;AAAS,CAAC,KAAM;EACnD,MAAM,CAAEC,WAAW,EAAEC,cAAc,CAAE,GAAGZ,QAAQ,CAAE,KAAM,CAAC;EAEzD,MAAM;IAAEa,UAAU;IAAEC;EAAY,CAAC,GAAGZ,SAAS,CAC1Ca,MAAM,IAAM;IACb,MAAM;MAAEC,QAAQ;MAAEC;IAAgB,CAAC,GAAGF,MAAM,CAAET,gBAAiB,CAAC;IAChE,OAAO;MACNQ,WAAW,EAAEE,QAAQ,CAAEN,QAAS,CAAC,EAAEI,WAAW,IAAI,EAAE;MACpDD,UAAU,EAAEI,eAAe,CAAEP,QAAS;IACvC,CAAC;EACF,CAAC,EACD,CAAEA,QAAQ,CACX,CAAC;EACD,MAAM;IAAEQ;EAAc,CAAC,GAAGjB,WAAW,CAAEK,gBAAiB,CAAC;EAEzD,MAAM;IACLa,iCAAiC;IACjCC;EACD,CAAC,GAAGZ,yBAAyB,CAAEE,QAAS,CAAC;EAEzC,MAAMW,SAAS,GAAGA,CAAA,KAAM;IACvB,IAAK,CAAEP,WAAW,CAACQ,MAAM,EAAG;MAC3B;IACD;IAEAJ,aAAa,CAAER,QAAQ,EAAEI,WAAY,CAAC;EACvC,CAAC;EAED,IAAIS,WAAW;EACf;EACA,IACC,CAAEJ,iCAAiC,IACnC,CAAEC,+BAA+B,EAChC;IACD;IACA,MAAMI,iBAAiB,GAAG1B,EAAE,CAC3B,6MACD,CAAC;IACDyB,WAAW,GAAGxB,OAAO,CAAEyB,iBAAiB,EAAEjB,iBAAkB,CAAC;EAC9D;EACA;EAAA,KACK;IACJ;IACA,MAAMiB,iBAAiB,GAAG1B,EAAE,CAC3B,2MACD,CAAC;IACDyB,WAAW,GAAGxB,OAAO,CAAEyB,iBAAiB,EAAEjB,iBAAkB,CAAC;EAC9D;EAEA,OACCkB,aAAA,CAAC7B,wBAAwB;IACxB8B,QAAQ,EAAG,CAAEb,UAAY;IACzBc,kBAAkB,EAAG7B,EAAE,CAAE,iBAAkB,CAAG;IAC9C8B,iBAAiB,EAAG,QAAU;IAC9BC,iBAAiB,EAAG/B,EAAE,CAAE,gCAAiC,CAAG;IAC5DgC,OAAO,EAAGA,CAAA,KAAMlB,cAAc,CAAE,IAAK;EAAG,GAExCa,aAAA,CAAC5B,IAAI,QACJ4B,aAAA,CAACtB,OAAO;IACP4B,OAAO,EAAGjC,EAAE,CACX,kFACD;EAAG,CACH,CAAC,EACF2B,aAAA,CAACrB,uBAAuB;IACvBM,QAAQ,EAAGA,QAAU;IACrBsB,SAAS,EAAGrB,WAAa;IACzBsB,YAAY,EAAGA,CAAA,KAAMrB,cAAc,CAAE,KAAM,CAAG;IAC9CsB,KAAK,EAAGpC,EAAE,CAAE,qBAAsB,CAAG;IACrCyB,WAAW,EAAGA,WAAa;IAC3BY,aAAa,EAAG,CACf;MAAEC,KAAK,EAAEtC,EAAE,CAAE,eAAgB,CAAC;MAAEgC,OAAO,EAAET;IAAU,CAAC;EAClD,CACH,CACI,CACmB,CAAC;AAE7B,CAAC;AAED,eAAeZ,uBAAuB"}